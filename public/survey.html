<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/survey.css">
    <link rel="stylesheet" href="styles/info_bar.css">
    <title>Abstract Summarization</title>
</head>

<body>
    <div class="container">
        <div class="sidebar_container">
            <div style="height: 180vh;" class="sidebar">
                <div class="line"></div>
                <div>
                    <p class="inactive">1</p>
                    <p class="inactive">2</p>
                    <p class="inactive">3</p>
                    <p class="inactive">4</p>
                    <p class="active">5</p>
                </div>
            </div>
        </div>
        <div style="margin-top: 40px;" class="container_body">
            <button class="info_button" onclick="openInfo()">?</button>
            <div class="info_bar" id="info_bar">
                <a href="javascript:void(0)" class="close_info" onclick="closeInfo()">&times;</a>
                <div style="font-size: 12px;" class="info_text">
                    <h2>Task Description</h2>
                    <p>
                        You are being asked to participate in a research study about identifying characteristics of, and patterns in, 
                        the summarization of research abstracts. This assignment will take you approximately 20 minutes to complete. 
                        This study is being done by masters students from the TU Delft, and will be used for a project
                        for the Crowd Computing course provided by the university. Data collected from this assignment may be included in a report 
                        and presentation submitted for the course.
                    </p>
                    <p>
                        For this assignment, you will first read an example of an abstract and a valid summary.
                        Next, you will complete two abstract summarization tasks. For these, you will be provided an abstract,
                        which you should summarize in the text box below it. The abstracts are 120-170 words in length, and
                        the <b>summaries should be roughly 2-4 sentences in length.</b> You do not need expertise in any subject 
                        to complete these summarization tasks. Finally, you must complete a survey about your experience
                        writing the summaries. Once the survey is complete, you can click "Submit" and you will be redirected to Prolific.
                        On any page, this opening statement can be read by clicking the "?" button.
                    </p>
                    <p>
                        Please consider the following when completing this assignment:
                        <br><br>
                        Once you have completed a section, please do not go back to it. <b>Moving back to previous pages may
                        introduce bugs that will risk the completion of your assignment.</b>
                        <br><br>
                        For the best experience, <b>please complete this survey in your browser's full screen mode.</b>
                        <br><br>
                        <b>You are allowed to use AI tools</b> (such as ChatGPT or similar) while completing this task. That said, 
                        the purpose of this study is to understand human reasoning and expression. For this reason, answers written 
                        mostly in your own words and ideas are much more valuable to us than answers that closely resemble typical AI outputs.
                        <br><br>
                        After writing two summaries and fully completing the survey, you will be financially compensated with a rate of 6£ per hour.            
                    </p>

                    <h2>Consent and Participant Information</h2>
                    <p>
                        To the best of our abilities, your data will be stored securely. We will collect and store the summaries you write, behavioral data that 
                        is tracked as you write, and your Prolific ID. The only personally identifying information that is stored will be your Prolific ID. 
                        The Prolific ID is stored exclusively for the quality management of the collected data, and will only be visible to the research team.
                        Data used for the Crowd Computing project will have the Prolific ID removed. The data will be stored in a database provided by Render.com.
                    </p>
                    <p>
                        <b>Since you clicked the "Next Page" button, you have consented to participating in this research.</b> For logistical reasons,
                        your data cannot be removed once you have consented to participating. 
                    </p>
                </div>
            </div>

            <h1>Survey</h1>
            <p>
                We are interested in understanding whether you used any generative AI models, such as ChatGPT, Gemini,
                or similar, for our tasks and how
                your experience was. <b>Please note that AI usage was not forbidden, and will not impact your
                compensation.</b> If you used an AI, we would
                appreciate your honest responses.
            </p>
            <div style="min-width: 1000px" class="summarization">
                <div>
                    <form id="surveyForm">
                        <p>1. How familiar are you with AI tools (e.g. ChatGPT, Gemini, etc.)?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto;">
                                <div><input type="radio" name="familiarity" value="Very unfamiliar"> <label>Very
                                        familiar</label></div>
                                <div><input type="radio" name="familiarity" value="Somewhat unfamiliar"> <label>Somewhat
                                        familiar</label></div>
                                <div><input type="radio" name="familiarity" value="Neutral"> <label>Neutral</label>
                                </div>
                                <div><input type="radio" name="familiarity" value="Somewhat familiar"> <label>Somewhat
                                        unfamiliar</label></div>
                                <div><input type="radio" name="familiarity" value="Very familiar"> <label>Very
                                        unfamiliar</label></div>
                            </div>
                        </fieldset>

                        <p>2. How often do you use AI tools?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto;">
                                <div><input type="radio" name="frequency" value="Every day"> <label>Every day</label>
                                </div>
                                <div><input type="radio" name="frequency" value="A few times a week"> <label>A few times
                                        a week</label></div>
                                <div><input type="radio" name="frequency" value="A few times a month"> <label>A few
                                        times a month</label></div>
                                <div><input type="radio" name="frequency" value="Only a couple times"> <label>Only a
                                        couple times</label></div>
                                <div><input type="radio" name="frequency" value="Never"> <label>Never</label></div>
                            </div>
                        </fieldset>

                        <p>3. What tasks do you usually use AI tools for?</p>
                        <textarea id="q3_text" rows="3" cols="180" class="survey_textarea"></textarea>

                        <p> 4. Were you allowed to use AI tools for this assignment? </p>
                        <div class="radio_list" style="grid-template-columns: 17.5% 17.5% auto;">
                            <div><input type="radio" name="allowed_ai" value="Yes"> <label>Yes</label></div>
                            <div><input type="radio" name="allowed_ai" value="No"> <label>No</label></div>
                        </div>

                        <p>
                            5. How much did you use generative AI tools for summarization task one? 
                            (Note: Please answer honestly—your response will not negatively affect your compensation, even if you used AI for all summaries.)
                        </p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto;">
                                <div><input type="radio" name="use_task1" value="Not at all"> <label>Not at all</label></div>
                                <div><input type="radio" name="use_task1" value="A little"> <label>A little</label></div>
                                <div><input type="radio" name="use_task1" value="Some"> <label>Some</label></div>
                                <div><input type="radio" name="use_task1" value="Mostly"> <label>Mostly</label></div>
                                <div><input type="radio" name="use_task1" value="All/almost all"> <label>All/almost all</label></div>
                            </div>
                        </fieldset>

                        <p>6. If yes, how difficult was it to use AI tools for summarization task one?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto auto;">
                                <div><input type="radio" name="difficulty_task1" value="Not applicable"> <label>Not
                                        applicable</label></div>
                                <div><input type="radio" name="difficulty_task1" value="Very difficult"> <label>Very
                                        difficult</label></div>
                                <div><input type="radio" name="difficulty_task1" value="Somewhat difficult">
                                    <label>Somewhat difficult</label>
                                </div>
                                <div><input type="radio" name="difficulty_task1" value="Neutral"> <label>Neutral</label>
                                </div>
                                <div><input type="radio" name="difficulty_task1" value="Somewhat easy"> <label>Somewhat
                                        easy</label></div>
                                <div><input type="radio" name="difficulty_task1" value="Very easy"> <label>Very
                                        easy</label></div>
                            </div>
                        </fieldset>

                        <p>
                            7. How much did you use AI tools for summarization task two?
                            (Note: Please answer honestly—your response will not negatively affect your compensation, even if you used AI for all summaries.)
                        </p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto;">
                                <div><input type="radio" name="use_task2" value="Not at all"> <label>Not at all</label></div>
                                <div><input type="radio" name="use_task2" value="A little"> <label>A little</label></div>
                                <div><input type="radio" name="use_task2" value="Some"> <label>Some</label></div>
                                <div><input type="radio" name="use_task2" value="Mostly"> <label>Mostly</label></div>
                                <div><input type="radio" name="use_task2" value="All/almost all"> <label>All/almost all</label></div>
                            </div>
                        </fieldset>

                        <p>8. If yes, how difficult was it to use AI tools for summarization task two?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto auto;">
                                <div><input type="radio" name="difficulty_task2" value="Not applicable"> <label>Not
                                        applicable</label></div>
                                <div><input type="radio" name="difficulty_task2" value="Very difficult"> <label>Very
                                        difficult</label></div>
                                <div><input type="radio" name="difficulty_task2" value="Somewhat difficult">
                                    <label>Somewhat difficult</label>
                                </div>
                                <div><input type="radio" name="difficulty_task2" value="Neutral"> <label>Neutral</label>
                                </div>
                                <div><input type="radio" name="difficulty_task2" value="Somewhat easy"> <label>Somewhat
                                        easy</label></div>
                                <div><input type="radio" name="difficulty_task2" value="Very easy"> <label>Very
                                        easy</label></div>
                            </div>
                        </fieldset>

                        <p>9. If you used AI tools for either summarization task, how did you use these tools and for what purpose?</p>
                        <textarea id="how_ai_used_text" rows="3" cols="180" class="survey_textarea"></textarea>

                        <p>10. Did you think disabling copy/paste made AI usage inconvenient for you?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: 17.6% 16.2% 16.2% auto;">
                                <div><input type="radio" name="disable_cp" value="Yes"> <label>Yes</label></div>
                                <div><input type="radio" name="disable_cp" value="No"> <label>No</label></div>
                                <div><input type="radio" name="disable_cp" value="I didn't use AI"> <label>I didn't
                                        use AI</label></div>
                            </div>
                        </fieldset>

                        <p>11. Did you switch tabs/windows during either of the tasks and was it to use an AI tool?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: auto auto auto auto auto;">
                                <div><input type="radio" name="tab_switch" value="Yes, AI"> <label>Yes, I switched
                                        tabs/windows to use an AI tool</label></div>
                                <div><input type="radio" name="tab_switch" value="Yes, Other"> <label>Yes, but not to
                                        use an AI tool</label></div>
                                <div><input type="radio" name="tab_switch" value="No"> <label>No, I didn't switch
                                        tabs/windows</label></div>
                            </div>
                        </fieldset>

                        <p>12. Did you face any pop-ups warning you not to use AI during summarization task 2?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: 17.5% 17.5% auto;">
                                <div><input type="radio" name="did_popup" value="Yes"> <label>Yes</label></div>
                                <div><input type="radio" name="did_popup" value="No"> <label>No</label></div>
                            </div>
                        </fieldset>

                        <p>13. If yes, did the pop-up deter or discourage you from using an AI tool?</p>
                        <fieldset>
                            <div class="radio_list" style="grid-template-columns: 17.6% 16.2% 25% 25% auto;">
                                <div><input type="radio" name="popup_discourage" value="Yes"> <label>Yes</label></div>
                                <div><input type="radio" name="popup_discourage" value="No"> <label>No</label></div>
                                <div><input type="radio" name="popup_discourage" value="Inaccurate"> <label>The pop-ups
                                        were inaccurate</label></div>
                                <div><input type="radio" name="popup_discourage" value="No pop-ups"> <label>I didn't see
                                        any pop-ups</label></div>
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
            <button class="next_button" onclick="submitResponse()" style="margin-top: 30px; cursor: pointer;">Submit</button>
        </div>
    </div>

    <script>
        function getRadioValue(name) {
            const element = document.querySelector(`input[name="${name}"]:checked`);
            return element ? element.value : "No response";
        }
        function openInfo() { document.getElementById("info_bar").style.width = "500px"; }

        function closeInfo() { document.getElementById("info_bar").style.width = "0"; }

        function submitResponse() {
            const q1 = getRadioValue('familiarity');
            const q2 = getRadioValue('frequency');
            const q3 = document.getElementById('q3_text').value;
            const q4 = getRadioValue('allowed_ai');
            const q5 = getRadioValue('use_task1');
            const q6 = getRadioValue('difficulty_task1');
            const q7 = getRadioValue('use_task2');
            const q8 = getRadioValue('difficulty_task2');
            const q9 = document.getElementById('how_ai_used_text').value;
            const q10 = getRadioValue('disable_cp');
            const q11 = getRadioValue('tab_switch');
            const q12 = getRadioValue('did_popup');
            const q13 = getRadioValue('popup_discourage');

            if (q1 == "No response" || q2 == "No response" || !q3.trim() || q4 == "No response" || q5 == "No response" || q6 == "No response" ||
                q7 == "No response" || q8 == "No response" || !q9.trim() || q10 == "No response" || q11 == "No response" || q12 == "No response" || 
                q13 == "No response"
            ){
                alert("Please complete the survey before proceeding.");
                return;
            }

            const workerNum = sessionStorage.getItem('workerNumber');
            let currentCount = parseInt(sessionStorage.getItem('number_popups')) || 0;

            const responseData = {
                "worker_number": workerNum ? Number(workerNum) : 0,
                "task": "survey",
                "number_popups": currentCount,
                "question1": q1,
                "question2": q2,
                "question3": q3,
                "question4": q4,
                "question5": q5,
                "question6": q6,
                "question7": q7,
                "question8": q8,
                "question9": q9,
                "question10": q10,
                "question11": q11,
                "question12": q12,
                "question13": q13,
            };

            console.log("Submitting data:", responseData);

            const postUrl = "https://detectllmuse-backend.onrender.com/api/response/add";

            fetch(postUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(responseData),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Success:', data);
                    // Redirect to final page or Prolific here
                    // window.location.href = "https://app.prolific.co/submissions/complete?cc=YOURCODE";
                    alert('Submission successful! You would now be redirected.');
                })
                .catch((error) => {
                    console.error('Error submitting form:', error);
                    alert('An error occurred during submission. Please try again.');
                });
        }
    </script>
</body>

</html>