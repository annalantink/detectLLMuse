<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="styles/style.css">
    <title>Abstract Summarization</title>
</head>

<body>
    <div class="container">
        <div class="sidebar_container">
            <div class="sidebar">
                <div class="line"></div>
                <div>
                    <p class="inactive">1</p>
                    <p class="inactive">2</p>
                    <p class="inactive">3</p>
                    <p class="active">4</p>
                    <p class="inactive">5</p>
                </div>
            </div>
        </div>
        <div class="container_body">
            <h1>Summarization Task 2</h1>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis ut nisl a metus volutpat fringilla at in
                ex.
                Integer et elementum metus. In leo ante, dapibus eu quam a, volutpat tincidunt nunc.
            </p>
            <div class="summarization">
                <div class="abstract">
                    <h2> Abstract </h2>
                    <p>
                        Suspendisse et augue eget tellus ullamcorper dignissim vel et velit. Suspendisse vehicula mollis
                        ex. Morbi
                        neque risus, luctus nec diam quis, faucibus elementum mauris. Donec iaculis lacinia nulla, a
                        fermentum ante
                        accumsan non. Pellentesque id dignissim dolor, vel mollis quam. Sed varius lobortis massa, sed
                        tempor eros
                        fermentum id. Nulla facilisi. Cras quam eros, convallis ac diam quis, mattis suscipit urna. Orci
                        varius natoque
                        penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque egestas
                        ullamcorper leo a
                        vestibulum. Nullam porta aliquam libero. Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Phasellus
                        aliquam semper accumsan. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
                        inceptos
                        himenaeos. Fusce venenatis lacus arcu, sit amet sodales lacus congue at. Orci varius natoque
                        penatibus et
                        magnis dis parturient montes, nascetur ridiculus mus. Mauris eget enim ac lorem congue ultricies
                        in vitae
                        justo. Integer eu nibh ut lorem porta rutrum eu consequat dui. Etiam posuere nunc et lacus
                        vulputate tincidunt.
                        Nulla malesuada interdum vulputate. Suspendisse viverra sem eget nisi hendrerit euismod. Sed
                        vestibulum blandit
                        nunc, auctor consequat tortor. Proin felis lorem, aliquam sed tempor maximus, ultrices et neque.
                        Nulla
                        commodo pretium nunc, sed elementum tortor posuere et.
                    </p>
                </div>
                <div class="sample_summary">
                    <h2> Summary </h2>
                    <textarea id="summaryTwoInput" rows="6" cols="180" class="input_summary"></textarea>
                </div>
            </div>

            <div class="button_container">
                <!-- <div>
                    <a href="/summarize_one"><button class="prev_button">Previous Page</button></a>
                </div> -->
                <div>
                    <a href="/survey"><button class="next_button" onclick="submit()">Next page</button></a>
                </div>
            </div>
        </div>
    </div>
    <script src="detection/detection.js"></script>
    <script>
        function submit() {
            const summarization = document.getElementById("summaryTwoInput").value;

            const responseData = {
                "worker_number": Number(sessionStorage.getItem('workerNumber')),
                "task": "task_two",
                "number_popups": 7, // TODO
                "response": summarization
            };

            const postUrl = "http://localhost:8080/api/response/add";

            fetch(postUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(responseData),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Success:', data);
                })
                .catch((error) => {
                    console.error('Error submitting form:', error);
                    alert('An error occurred during submission. Please try again.');
                });
        }
        setupDetection("summaryTwoInput", "summary2");
    </script>
</body>

</html>